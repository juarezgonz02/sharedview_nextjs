(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{43679:function(e,t,o){Promise.resolve().then(o.bind(o,27675))},27675:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return page}});var r=o(57437),l=o(2265),a=o(82564),s=o(56256),n=o(88110),c=o.n(n),i=o(43574),d=o(9273),f=o(82044),h=o(33071);let callGetRoomsApi=async()=>{let e="".concat("http","://").concat("localhost");try{let t=await fetch("".concat(e,":").concat("8000","/user/rooms"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});return t}catch(e){throw console.log(e),e}},handleGetRoomsResponse=async e=>{if(200===e.status){let t=await e.json();return t}try{let t=await e.json(),o=t.message||"Error en el servidor";throw o}catch(e){throw"Error en el servidor"}},useFetchRooms=async()=>{try{let e=await callGetRoomsApi(),t=await handleGetRoomsResponse(e);return t.rooms}catch(e){console.log(e)}},callDeleteRoomApi=async e=>{let t="".concat("http","://").concat("localhost");try{let o=await fetch("".concat(t,":").concat("8000","/room/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});return o}catch(e){throw console.log(e),e}},handleDeleteRoomResponse=async e=>{if(200===e.status){let t=await e.json();return t}try{let t=await e.json(),o=t.message||"Error en el servidor";throw o}catch(e){throw"Error en el servidor"}},useFetchDeleteRoom=async e=>{try{let t=await callDeleteRoomApi(e);await handleDeleteRoomResponse(t)}catch(e){console.log(e)}},m="".concat("http","://").concat("localhost"),callCreateRoomApi=async e=>{try{let t=await fetch("".concat(m,":").concat("8000","/room"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),o=await t.json();return{response:t,data:o}}catch(e){throw console.error(e),e}},handleCreateRoomResponse=async(e,t,o)=>{if(201===e.status)t("Room created successfully");else{let t=await e.json(),r=t.message||"Failed to create room";o(r)}},useFetchCreateRoom=async(e,t,o)=>{let{name:r}=e;try{let{response:e}=await callCreateRoomApi({name:r});await handleCreateRoomResponse(e,t,o)}catch(e){o("Error en el servidor")}};var x=o(79404),u=o(5925),components_CreateRoomForm=e=>{let{handleOk:t,handleCancel:o,createRooms:a}=e,s=l.useRef(null),onSuccess=e=>u.ZP.success(e),onError=e=>u.ZP.error(e);return(0,r.jsxs)(d.default,{theme:{components:{Form:{labelColor:"#fff",labelRequiredMarkColor:"#7f19b4",colorError:"#a233d1"},Input:{colorBgContainer:"#1e1e1e",colorBorder:"#1e1e1e",colorText:"#fff",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",activeBorderColor:"#fff",hoverBorderColor:"#fff",hoverBorderColor:"#fff",colorError:"#fff"},Select:{colorBorder:"#1e1e1e",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",colorBgContainer:"#1e1e1e",optionSelectedBg:"#1e1e1e",optionSelectedColor:"#fff",colorBgElevated:"#1e1e1e",colorText:"#fff",colorPrimaryHover:"#fff",colorPrimary:"#fff",hoverBorderColor:"#fff",colorError:"#fff"}}},children:[(0,r.jsxs)(x.Z,{name:"createRoom",layout:"vertical",ref:s,onFinish:e=>{a(e,onSuccess,onError),setTimeout(()=>{t()},1500),s.current.resetFields()},autoComplete:"off",style:{marginTop:"20px"},children:[(0,r.jsx)(x.Z.Item,{label:"Nombre de la sala",name:"name",rules:[{required:!0,message:"Ingrese el nombre de la sala!"}],children:(0,r.jsx)(i.Z,{placeholder:"Ingrese el nombre"})}),(0,r.jsxs)(x.Z.Item,{style:{display:"flex",justifyContent:"end",alignItems:"end"},children:[(0,r.jsx)(c(),{type:"default",style:{padding:"0 20px",marginRight:"10px",borderColor:"#7f19b4",color:"#fff"},onClick:()=>o(s),children:"Cancelar"}),(0,r.jsx)(c(),{type:"default",htmlType:"submit",style:{backgroundColor:"#7f19b4",color:"#fff",padding:"0 20px",borderColor:"#7f19b4"},children:"Crear"})]})]}),(0,r.jsx)(u.x7,{})]})},p=o(16691),g=o.n(p),b={src:"/_next/static/media/Voice chat-bro.1bb12bb7.png",height:2e3,width:2e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAtklEQVR42mOAgWkzZjLD2SHHGOESJ06eZIKx////z/jr9X8I352B79LZW2wgQZZzF84neweG2gGFWYCYWZahU2P98t1tbz68sgcrPnr0xISz586tW7BgifvabSuClrQf3FyRNGkB3Jr+xG2HTh+79P/R40f/b9++A6Qf/z905NBCuIJZFbtitm7aM+fi5UuN165drwC6a9qdO3c1YPKMQHcwM2ABM2bPZmJA9gEQM4EUQ9lgrwIABLxjDgXHFRkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},j=o(92608),C=o(69615),y=o(97741),v=o(55954),w=o(63477),A=o(45623);let R="".concat("http","://").concat("localhost"),callChangeStateApi=async e=>{let{state:t,code:o}=e;try{let e=await fetch("".concat(R,":").concat("8000","/room/").concat(o),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublic:t}),credentials:"include"}),r=await e.json();return{response:e,data:r}}catch(e){throw console.error(e),e}},useFetchChangeState_handleCreateRoomResponse=async(e,t,o)=>{if(200===e.status)t("Room state changed successfully");else{let t=await e.json(),r=t.message||"Failed to change room state";o(r)}},useFetchChangeState=async(e,t,o,r)=>{console.log(t);let{state:l}=e;try{let{response:e}=await callChangeStateApi({state:l,code:t});await useFetchChangeState_handleCreateRoomResponse(e,o,r)}catch(e){r("Error en el servidor")}},S="".concat("http","://").concat("localhost"),callAddUserApi=async e=>{let{username:t,code:o}=e;try{let e=await fetch("".concat(S,":").concat("8000","/room/").concat(o,"/user/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"}),r=await e.json();return{response:e,data:r}}catch(e){throw console.error(e),e}},useFetchAddUser_handleCreateRoomResponse=async(e,t,o)=>{if(200===e.status)t("User added successfully");else{let t=await e.json(),r=t.message||"Failed to add user";o(r)}},useFetchAddUser=async(e,t,o,r)=>{let{username:l}=e;try{let{response:e}=await callAddUserApi({username:l,code:t});await useFetchAddUser_handleCreateRoomResponse(e,o,r)}catch(e){r("Error en el servidor")}};o(11490);let onFinish=(e,t,o,r,l)=>a=>{useFetchChangeState(a,o,e,t),useFetchAddUser({username:localStorage.getItem("username")},o,()=>{},t),setTimeout(()=>{r(),l()},1500)};var components_ChangeState=e=>{let{handleStateOk:t,handleStateCancel:o,code:l,state:a,getRooms:s}=e;return console.log(a),(0,r.jsxs)(d.default,{theme:{components:{Form:{labelColor:"#fff",labelRequiredMarkColor:"#7f19b4",colorError:"#a233d1"},Input:{colorBgContainer:"#1e1e1e",colorBorder:"#1e1e1e",colorText:"#fff",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",activeBorderColor:"#fff",hoverBorderColor:"#fff",hoverBorderColor:"#fff",colorError:"#fff"},Select:{colorBorder:"#1e1e1e",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",colorBgContainer:"#1e1e1e",optionSelectedBg:"#1e1e1e",optionSelectedColor:"#fff",colorBgElevated:"#1e1e1e",colorText:"#fff",colorPrimaryHover:"#fff",colorPrimary:"#fff",hoverBorderColor:"#fff",colorError:"#fff"}}},children:[(0,r.jsxs)(x.Z,{name:"changeState",layout:"vertical",onFinish:onFinish(e=>u.ZP.success(e),e=>u.ZP.error(e),l,t,s),autoComplete:"off",style:{marginTop:"20px"},children:[(0,r.jsx)(x.Z.Item,{label:"Cambiar el estado de la sala",name:"state",initialValue:!0===a?"Publica":"Privada",rules:[{required:!0,message:"Por favor, ingrese el estado de la sala"}],children:(0,r.jsx)(A.Z,{style:{width:"100%"},options:[{value:!0,label:"Publica"},{value:!1,label:"Privada"}]})}),(0,r.jsxs)(x.Z.Item,{style:{display:"flex",justifyContent:"end",alignItems:"end"},children:[(0,r.jsx)(c(),{type:"default",style:{padding:"0 20px",marginRight:"10px",borderColor:"#7f19b4",color:"#fff"},onClick:()=>o(),children:"Cancelar"}),(0,r.jsx)(c(),{type:"default",htmlType:"submit",style:{backgroundColor:"#7f19b4",color:"#fff",padding:"0 20px",borderColor:"#7f19b4"},children:"Cambiar"})]})]}),(0,r.jsx)(u.x7,{})]})};let AddUsers_onFinish=(e,t,o,r,l,a)=>s=>{useFetchAddUser(s,o,e,t),setTimeout(()=>{r()},1500),a(),l.current.resetFields()};var components_AddUsers=e=>{let{code:t,handleAddUserOk:o,handleAddUserCancel:a,getRooms:s}=e,n=l.useRef(null);return(0,r.jsxs)(d.default,{theme:{components:{Form:{labelColor:"#fff",labelRequiredMarkColor:"#7f19b4",colorError:"#a233d1"},Input:{colorBgContainer:"#1e1e1e",colorBorder:"#1e1e1e",colorText:"#fff",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",activeBorderColor:"#fff",hoverBorderColor:"#fff",hoverBorderColor:"#fff",colorError:"#fff"},Select:{colorBorder:"#1e1e1e",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",colorBgContainer:"#1e1e1e",optionSelectedBg:"#1e1e1e",optionSelectedColor:"#fff",colorBgElevated:"#1e1e1e",colorText:"#fff",colorPrimaryHover:"#fff",colorPrimary:"#fff",hoverBorderColor:"#fff",colorError:"#fff"}}},children:[(0,r.jsxs)(x.Z,{name:"addUsers",ref:n,layout:"vertical",onFinish:AddUsers_onFinish(e=>u.ZP.success(e),e=>u.ZP.error(e),t,o,n,s),autoComplete:"off",style:{marginTop:"20px"},children:[(0,r.jsx)(x.Z.Item,{label:"Agregar usuarios a la sala",name:"username",rules:[{required:!0,message:"Por favor, ingrese el nombre del usuario"}],children:(0,r.jsx)(i.Z,{placeholder:"Ingrese el nombre del usuario"})}),(0,r.jsxs)(x.Z.Item,{style:{display:"flex",justifyContent:"end",alignItems:"end"},children:[(0,r.jsx)(c(),{type:"default",style:{padding:"0 20px",marginRight:"10px",borderColor:"#7f19b4",color:"#fff"},onClick:()=>a(n),children:"Cancelar"}),(0,r.jsx)(c(),{type:"default",htmlType:"submit",style:{backgroundColor:"#7f19b4",color:"#fff",padding:"0 20px",borderColor:"#7f19b4"},children:"Agregar"})]})]}),(0,r.jsx)(u.x7,{})]})},B=o(61396),N=o.n(B);let formatDateAndTime=e=>{let t=new Date(e),o=t.toLocaleDateString(),r=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0");return"".concat(r," - ").concat(o)},RoomsTable=e=>{let{rooms:t,deleteRoom:o,getRooms:a}=e,[s,n]=(0,l.useState)(null),[c,i]=(0,l.useState)(null),[f,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(!1),showFormState=(e,t)=>o=>{o.preventDefault(),n(e),i(t),m(!0)},showAddUser=e=>t=>{t.preventDefault(),n(e),u(!0)},handleAddUserOk=()=>{u(!1)},handleAddUserCancel=e=>{var t;null===(t=e.current)||void 0===t||t.resetFields(),u(!1)},handleStateOk=()=>{m(!1)},handleStateCancel=()=>{m(!1)},confirm=e=>t=>{t.preventDefault(),o(e)};return(0,r.jsx)("div",{className:"flex flex-row gap-8",children:t.map(e=>(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center gap-2 mt-3",children:[(0,r.jsx)("span",{className:"text-white text-sm font-bold phone:text-xs",children:e.name}),(0,r.jsxs)("span",{className:"text-white text-sm phone:text-xs",children:[(0,r.jsx)("span",{className:"text-white opacity-60",children:"Codigo: "}),e.code]}),(0,r.jsxs)("span",{className:"text-white text-sm phone:text-xs",children:[(0,r.jsx)("span",{className:"text-white opacity-60",children:"Expira: "}),formatDateAndTime(e.expirationDate)]}),(0,r.jsxs)("span",{className:"text-white text-sm phone:text-xs",children:[(0,r.jsx)("span",{className:"text-white opacity-60",children:"Estado: "}),e.isPublic?"Publica":"Privada"]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,r.jsx)(w.Z,{title:"Eliminar sala",description:"\xbfEstas seguro que deseas eliminar esta sala?",okType:"danger",okText:"Si",cancelText:"No",onConfirm:confirm(e.code),cancelButtonProps:{type:"text"},icon:(0,r.jsx)(y.default,{style:{color:"red"}}),children:(0,r.jsx)(j.Z,{})}),(0,r.jsx)(C.Z,{onClick:showFormState(e.code,e.isPublic)}),(0,r.jsxs)(d.default,{theme:{components:{Button:{colorBgTextHover:"#fff",colorPrimaryHover:"#fff",colorTextDisabled:"rgba(255, 255, 255, 0.5)",colorBgContainerDisabled:"rgba(127, 25, 180, 0.5))",colorPrimaryActive:"#fff"},Modal:{contentBg:"#121212",headerBg:"#121212",titleColor:"#fff"}}},children:[(0,r.jsx)(h.Z,{title:"Cambiar el estado",open:f,footer:null,closeIcon:!1,children:(0,r.jsx)(components_ChangeState,{handleStateOk:handleStateOk,handleStateCancel:handleStateCancel,code:s,state:c,getRooms:a})}),!1===e.isPublic?(0,r.jsx)(v.Z,{onClick:showAddUser(e.code)}):null,(0,r.jsx)(h.Z,{title:"Agregar usuarios",open:x,footer:null,closeIcon:!1,children:(0,r.jsx)(components_AddUsers,{handleAddUserOk:handleAddUserOk,handleAddUserCancel:handleAddUserCancel,code:s,getRooms:a})})]})]}),(0,r.jsx)(N(),{href:"".concat(e.code),children:(0,r.jsx)("button",{className:"bg-purple hover:bg-violet-900 text-white text-sm font-bold py-1 px-2 rounded phone:px-1 phone:text-xs",children:"Ingresar"})})]},e.code))})};var components_RoomsList=e=>{let{rooms:t,deleteRoom:o,getRooms:l}=e;return(0,r.jsxs)("div",{className:"flex flex-col mt-3 tablet:items-center tablet:justify-center",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,r.jsx)("h1",{className:"text-base font-bold text-white phone:text-sm",children:"Tus salas"}),(0,r.jsx)(f.default,{placement:"top",title:"Solo puedes tener 3 salas",children:(0,r.jsx)(y.default,{})})]}),(0,r.jsx)(RoomsTable,{rooms:t,deleteRoom:o,getRooms:l})]})};let Header=()=>(0,r.jsxs)("div",{className:"flex flex-col gap-2 tablet:items-center tablet:justify-center",children:[(0,r.jsxs)("div",{className:"text-white phone:text-start",children:[(0,r.jsx)("span",{className:"text-purple text-4xl font-bold tablet:text-3xl",children:"Shared"}),(0,r.jsx)("span",{className:"text-4xl font-bold tablet:text-3xl",children:"View"})]}),(0,r.jsx)("p",{className:"text-base text-gray-400 tablet:text-sm phone:text-center",children:"Crea una sala y comparte el codigo con tus amigos"})]}),Controls=e=>{var t;let{isModalOpen:o,setIsModalOpen:n,stateButton:m,createRooms:x}=e,[u,p]=(0,l.useState)(!1),g=(0,l.useRef)();return(0,r.jsxs)("div",{className:"flex flex-wrap-reverse gap-4 tablet:flex-row tablet:items-center tablet:justify-center",children:[(0,r.jsxs)(d.default,{theme:{components:{Button:{colorBgTextHover:"#fff",colorPrimaryHover:"#fff",colorTextDisabled:"rgba(255, 255, 255, 0.5)",colorBgContainerDisabled:"rgba(127, 25, 180, 0.5))",colorPrimaryActive:"#fff"},Modal:{contentBg:"#121212",headerBg:"#121212",titleColor:"#fff"}}},children:[(0,r.jsx)(c(),{size:"large",disabled:m,className:"bg-purple hover:bg-violet-900 text-white border-none phone:w-full",icon:(0,r.jsx)(a.Z,{}),onClick:()=>{n(!0)},children:"Crear sala"}),(0,r.jsx)(h.Z,{title:"Crear una sala",open:o,footer:null,closeIcon:!1,children:(0,r.jsx)(components_CreateRoomForm,{handleOk:()=>{n(!1)},handleCancel:e=>{var t;null===(t=e.current)||void 0===t||t.resetFields(),n(!1)},createRooms:x})})]}),(0,r.jsx)("div",{className:"flex flex-row items-center gap-4 tablet:gap-2 phone:w-full",children:(0,r.jsxs)(d.default,{theme:{components:{Button:{colorText:"#fff",colorTextDisabled:"rgba(255, 255, 255, 0.5)"},Input:{activeBorderColor:"#1e1e1e",hoverBorderColor:"#1e1e1e"}}},children:[(0,r.jsx)(i.Z,{name:"code",size:"large",placeholder:"Ingresa el codigo de la reunion",onChange:e=>{""===e.target.value?p(!1):p(!0)},ref:g,allowClear:!0,suffix:(0,r.jsx)(f.default,{title:"Example: xac-1a3-vds",children:(0,r.jsx)(s.Z,{style:{color:"rgba(0,0,0,.45)"}})})}),(0,r.jsx)(N(),{href:"/[code]",as:"/".concat(null===(t=g.current)||void 0===t?void 0:t.input.value),children:(0,r.jsx)(c(),{type:"text",size:"large",disabled:!u,children:"Unirse"})})]})})]})},ImageHome=()=>(0,r.jsx)(g(),{src:b,width:500,height:500,alt:"img",className:"phone:h-60 phone:w-60 tablet:h-96 tablet:w-96"}),Rooms=()=>{let[e,t]=(0,l.useState)(!1),[o,a]=(0,l.useState)(!1),[s,n]=(0,l.useState)([]),createRooms=async(e,t,o)=>{await useFetchCreateRoom(e,t,o),getRooms()},getRooms=async()=>{let e=await useFetchRooms();n(e)},deleteRoom=async e=>{await useFetchDeleteRoom(e),getRooms()};return(0,l.useEffect)(()=>{getRooms()},[]),(0,l.useEffect)(()=>{s.length>=3?a(!0):a(!1)},[s]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Controls,{isModalOpen:e,setIsModalOpen:t,stateButton:o,createRooms:createRooms}),(0,r.jsx)(components_RoomsList,{rooms:s,deleteRoom:deleteRoom,getRooms:getRooms})]})};var components_HomeView=()=>(0,r.jsxs)("div",{className:"flex flex-row items-center justify-evenly px-8 w-full tablet:flex-col-reverse tablet:justify-center",children:[(0,r.jsxs)("div",{className:"w-1/2 flex flex-col gap-8 tablet:w-full tablet:mb-8",children:[(0,r.jsx)(Header,{}),(0,r.jsx)(Rooms,{})]}),(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)(ImageHome,{})})]}),T=o(93421),page=()=>{let[e,t]=l.useState(null);return l.useEffect(()=>{t(localStorage.getItem("username"))},[]),(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)(T.default,{username:e}),(0,r.jsx)("div",{className:"flex flex-1 justify-between ",children:(0,r.jsx)(components_HomeView,{})})]})}},93421:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return components_Navbar}});var r=o(57437),l=o(2265),a=o(16691),s=o.n(a),n={src:"/_next/static/media/ICONO.218f4b61.png",height:377,width:519,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAyUlEQVR42mMAgX3ZDHK31uYEMEBByxoGFiDFAcTcDFdvvVR6cWbV5Zd78k8c37RyeWXtUtOO3IVbqxTXvCyWWnqe4ePX1zpXzj76HMmwNW72pLXxLVlzV7WlLL3QrLf9f2/6us8MUKB0eNOlU6cPXltQnzV9c0fW0hetpjv+Type95NhRt1m58PbLq05sfvarv1rLq9M0G3r7i1b+r9SbO27lphlLxk6SuZy7V51pm7t1KOzbt+/JtDbPUl8/pylBrIMwVIMDKFiAO6FXo4KV4ChAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},c=o(32142),i=o(61396),d=o.n(i);let Clock=()=>{let[e,t]=(0,l.useState)(""),getCurrentDate=()=>{let e=new Date,t=e.toDateString(),o=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0");return"".concat(o," - ").concat(t)};return(0,l.useEffect)(()=>{let e=setInterval(()=>{t(getCurrentDate())},1e3);return()=>clearInterval(e)},[]),(0,r.jsx)("span",{className:"text-gray-400 text-sm tablet:text-xs",children:e})};var components_Navbar=e=>{let{username:t}=e;return(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between py-4 top-0 w-full px-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(s(),{src:n,width:60,height:60,alt:"logo"}),(0,r.jsxs)("div",{className:"flex flex-row phone:hidden",children:[(0,r.jsx)("span",{className:"text-purple font-bold text-lg tablet:text-base",children:"Shared"}),(0,r.jsx)("span",{className:"font-bold text-lg tablet:text-base",children:"View"})]})]}),(0,r.jsx)("div",{className:"flex flex-row items-center gap-4",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"phone:hidden",children:(0,r.jsx)(Clock,{})}),(0,r.jsx)("span",{className:"text-white font-bold tablet:text-sm",children:t}),(0,r.jsx)(d(),{href:"/logout",children:(0,r.jsx)(c.Z,{style:{fontSize:"20px",marginTop:"5px"}})})]}):(0,r.jsx)("div",{className:"phone:flex",children:(0,r.jsx)(Clock,{})})})]})}}},function(e){e.O(0,[964,718,110,724,6,31,971,864,744],function(){return e(e.s=43679)}),_N_E=e.O()}]);