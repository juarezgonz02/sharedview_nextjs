(()=>{var e={};e.id=951,e.ids=[951],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},30319:(e,t,o)=>{"use strict";o.r(t),o.d(t,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>f,routeModule:()=>u,tree:()=>d});var r=o(73137),a=o(54647),l=o(4183),s=o.n(l),n=o(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);o.d(t,c);let i=r.AppPageRouteModule,d=["",{children:["home",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,37154)),"D:\\Nueva carpeta\\sharedview_nextjs\\NextJS Proyect\\src\\app\\home\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(o.bind(o,26543)),"D:\\Nueva carpeta\\sharedview_nextjs\\NextJS Proyect\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,51918,23)),"next/dist/client/components/not-found-error"]}],f=["D:\\Nueva carpeta\\sharedview_nextjs\\NextJS Proyect\\src\\app\\home\\page.js"],h="/home/page",m={require:o,loadChunk:()=>Promise.resolve()},u=new i({definition:{kind:a.x.APP_PAGE,page:"/home/page",pathname:"/home",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},45656:(e,t,o)=>{Promise.resolve().then(o.bind(o,49341))},49341:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>page});var r=o(60080),a=o(9885),l=o.n(a),s=o(71366),n=o(97502),c=o(79636),i=o.n(c),d=o(72781),f=o(34791),h=o(81057),m=o(53275);let callGetRoomsApi=async()=>{try{let e=await fetch("http://localhost:8000/user/rooms",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});return e}catch(e){throw console.log(e),e}},handleGetRoomsResponse=async e=>{if(200===e.status){let t=await e.json();return t}try{let t=await e.json(),o=t.message||"Error en el servidor";throw o}catch(e){throw"Error en el servidor"}},useFetchRooms=async()=>{try{let e=await callGetRoomsApi(),t=await handleGetRoomsResponse(e);return t.rooms}catch(e){console.log(e)}},callDeleteRoomApi=async e=>{try{let t=await fetch(`http://localhost:8000/room/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});return t}catch(e){throw console.log(e),e}},handleDeleteRoomResponse=async e=>{if(200===e.status){let t=await e.json();return t}try{let t=await e.json(),o=t.message||"Error en el servidor";throw o}catch(e){throw"Error en el servidor"}},useFetchDeleteRoom=async e=>{try{let t=await callDeleteRoomApi(e);await handleDeleteRoomResponse(t)}catch(e){console.log(e)}},callCreateRoomApi=async e=>{try{let t=await fetch("http://localhost:8000/room",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),o=await t.json();return{response:t,data:o}}catch(e){throw console.error(e),e}},handleCreateRoomResponse=async(e,t,o)=>{if(201===e.status)t("Room created successfully");else{let t=await e.json(),r=t.message||"Failed to create room";o(r)}},useFetchCreateRoom=async(e,t,o)=>{let{name:r}=e;try{let{response:e}=await callCreateRoomApi({name:r});await handleCreateRoomResponse(e,t,o)}catch(e){o("Error en el servidor")}};var u=o(77829),x=o(10345);let components_CreateRoomForm=({handleOk:e,handleCancel:t,createRooms:o})=>{let a=l().useRef(null),onSuccess=e=>x.ZP.success(e),onError=e=>x.ZP.error(e);return(0,r.jsxs)(f.default,{theme:{components:{Form:{labelColor:"#fff",labelRequiredMarkColor:"#7f19b4",colorError:"#a233d1"},Input:{colorBgContainer:"#1e1e1e",colorBorder:"#1e1e1e",colorText:"#fff",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",activeBorderColor:"#fff",hoverBorderColor:"#fff",hoverBorderColor:"#fff",colorError:"#fff"},Select:{colorBorder:"#1e1e1e",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",colorBgContainer:"#1e1e1e",optionSelectedBg:"#1e1e1e",optionSelectedColor:"#fff",colorBgElevated:"#1e1e1e",colorText:"#fff",colorPrimaryHover:"#fff",colorPrimary:"#fff",hoverBorderColor:"#fff",colorError:"#fff"}}},children:[(0,r.jsxs)(u.Z,{name:"createRoom",layout:"vertical",ref:a,onFinish:t=>{o(t,onSuccess,onError),setTimeout(()=>{e()},1500),a.current.resetFields()},autoComplete:"off",style:{marginTop:"20px"},children:[r.jsx(u.Z.Item,{label:"Nombre de la sala",name:"name",rules:[{required:!0,message:"Ingrese el nombre de la sala!"}],children:r.jsx(d.Z,{placeholder:"Ingrese el nombre"})}),(0,r.jsxs)(u.Z.Item,{style:{display:"flex",justifyContent:"end",alignItems:"end"},children:[r.jsx(i(),{type:"default",style:{padding:"0 20px",marginRight:"10px",borderColor:"#7f19b4",color:"#fff"},onClick:()=>t(a),children:"Cancelar"}),r.jsx(i(),{type:"default",htmlType:"submit",style:{backgroundColor:"#7f19b4",color:"#fff",padding:"0 20px",borderColor:"#7f19b4"},children:"Crear"})]})]}),r.jsx(x.x7,{})]})};var p=o(52451),g=o.n(p);let b={src:"/_next/static/media/Voice chat-bro.1bb12bb7.png",height:2e3,width:2e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAtklEQVR42mOAgWkzZjLD2SHHGOESJ06eZIKx////z/jr9X8I352B79LZW2wgQZZzF84neweG2gGFWYCYWZahU2P98t1tbz68sgcrPnr0xISz586tW7BgifvabSuClrQf3FyRNGkB3Jr+xG2HTh+79P/R40f/b9++A6Qf/z905NBCuIJZFbtitm7aM+fi5UuN165drwC6a9qdO3c1YPKMQHcwM2ABM2bPZmJA9gEQM4EUQ9lgrwIABLxjDgXHFRkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};var j=o(21367),y=o(59671),C=o(17802),v=o(40074),w=o(47049),R=o(13214);let callChangeStateApi=async({state:e,code:t})=>{try{let o=await fetch(`http://localhost:8000/room/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublic:e}),credentials:"include"}),r=await o.json();return{response:o,data:r}}catch(e){throw console.error(e),e}},useFetchChangeState_handleCreateRoomResponse=async(e,t,o)=>{if(200===e.status)t("Room state changed successfully");else{let t=await e.json(),r=t.message||"Failed to change room state";o(r)}},useFetchChangeState=async(e,t,o,r)=>{console.log(t);let{state:a}=e;try{let{response:e}=await callChangeStateApi({state:a,code:t});await useFetchChangeState_handleCreateRoomResponse(e,o,r)}catch(e){r("Error en el servidor")}},callAddUserApi=async({username:e,code:t})=>{try{let o=await fetch(`http://localhost:8000/room/${t}/user/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"}),r=await o.json();return{response:o,data:r}}catch(e){throw console.error(e),e}},useFetchAddUser_handleCreateRoomResponse=async(e,t,o)=>{if(200===e.status)t("User added successfully");else{let t=await e.json(),r=t.message||"Failed to add user";o(r)}},useFetchAddUser=async(e,t,o,r)=>{let{username:a}=e;try{let{response:e}=await callAddUserApi({username:a,code:t});await useFetchAddUser_handleCreateRoomResponse(e,o,r)}catch(e){r("Error en el servidor")}};o(72479);let onFinish=(e,t,o,r,a)=>l=>{useFetchChangeState(l,o,e,t),useFetchAddUser({username:localStorage.getItem("username")},o,()=>{},t),setTimeout(()=>{r(),a()},1500)},components_ChangeState=({handleStateOk:e,handleStateCancel:t,code:o,state:a,getRooms:l})=>(console.log(a),(0,r.jsxs)(f.default,{theme:{components:{Form:{labelColor:"#fff",labelRequiredMarkColor:"#7f19b4",colorError:"#a233d1"},Input:{colorBgContainer:"#1e1e1e",colorBorder:"#1e1e1e",colorText:"#fff",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",activeBorderColor:"#fff",hoverBorderColor:"#fff",hoverBorderColor:"#fff",colorError:"#fff"},Select:{colorBorder:"#1e1e1e",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",colorBgContainer:"#1e1e1e",optionSelectedBg:"#1e1e1e",optionSelectedColor:"#fff",colorBgElevated:"#1e1e1e",colorText:"#fff",colorPrimaryHover:"#fff",colorPrimary:"#fff",hoverBorderColor:"#fff",colorError:"#fff"}}},children:[(0,r.jsxs)(u.Z,{name:"changeState",layout:"vertical",onFinish:onFinish(e=>x.ZP.success(e),e=>x.ZP.error(e),o,e,l),autoComplete:"off",style:{marginTop:"20px"},children:[r.jsx(u.Z.Item,{label:"Cambiar el estado de la sala",name:"state",initialValue:!0===a?"Publica":"Privada",rules:[{required:!0,message:"Por favor, ingrese el estado de la sala"}],children:r.jsx(R.Z,{style:{width:"100%"},options:[{value:!0,label:"Publica"},{value:!1,label:"Privada"}]})}),(0,r.jsxs)(u.Z.Item,{style:{display:"flex",justifyContent:"end",alignItems:"end"},children:[r.jsx(i(),{type:"default",style:{padding:"0 20px",marginRight:"10px",borderColor:"#7f19b4",color:"#fff"},onClick:()=>t(),children:"Cancelar"}),r.jsx(i(),{type:"default",htmlType:"submit",style:{backgroundColor:"#7f19b4",color:"#fff",padding:"0 20px",borderColor:"#7f19b4"},children:"Cambiar"})]})]}),r.jsx(x.x7,{})]})),AddUsers_onFinish=(e,t,o,r,a,l)=>s=>{useFetchAddUser(s,o,e,t),setTimeout(()=>{r()},1500),l(),a.current.resetFields()},components_AddUsers=({code:e,handleAddUserOk:t,handleAddUserCancel:o,getRooms:a})=>{let s=l().useRef(null);return(0,r.jsxs)(f.default,{theme:{components:{Form:{labelColor:"#fff",labelRequiredMarkColor:"#7f19b4",colorError:"#a233d1"},Input:{colorBgContainer:"#1e1e1e",colorBorder:"#1e1e1e",colorText:"#fff",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",activeBorderColor:"#fff",hoverBorderColor:"#fff",hoverBorderColor:"#fff",colorError:"#fff"},Select:{colorBorder:"#1e1e1e",colorTextPlaceholder:"rgba(255, 255, 255, 0.4)",colorBgContainer:"#1e1e1e",optionSelectedBg:"#1e1e1e",optionSelectedColor:"#fff",colorBgElevated:"#1e1e1e",colorText:"#fff",colorPrimaryHover:"#fff",colorPrimary:"#fff",hoverBorderColor:"#fff",colorError:"#fff"}}},children:[(0,r.jsxs)(u.Z,{name:"addUsers",ref:s,layout:"vertical",onFinish:AddUsers_onFinish(e=>x.ZP.success(e),e=>x.ZP.error(e),e,t,s,a),autoComplete:"off",style:{marginTop:"20px"},children:[r.jsx(u.Z.Item,{label:"Agregar usuarios a la sala",name:"username",rules:[{required:!0,message:"Por favor, ingrese el nombre del usuario"}],children:r.jsx(d.Z,{placeholder:"Ingrese el nombre del usuario"})}),(0,r.jsxs)(u.Z.Item,{style:{display:"flex",justifyContent:"end",alignItems:"end"},children:[r.jsx(i(),{type:"default",style:{padding:"0 20px",marginRight:"10px",borderColor:"#7f19b4",color:"#fff"},onClick:()=>o(s),children:"Cancelar"}),r.jsx(i(),{type:"default",htmlType:"submit",style:{backgroundColor:"#7f19b4",color:"#fff",padding:"0 20px",borderColor:"#7f19b4"},children:"Agregar"})]})]}),r.jsx(x.x7,{})]})};var A=o(11440),P=o.n(A);let formatDateAndTime=e=>{let t=new Date(e),o=t.toLocaleDateString(),r=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0");return`${r} - ${o}`},RoomsTable=({rooms:e,deleteRoom:t,getRooms:o})=>{let[l,s]=(0,a.useState)(null),[n,c]=(0,a.useState)(null),[i,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)(!1),showFormState=(e,t)=>o=>{o.preventDefault(),s(e),c(t),d(!0)},showAddUser=e=>t=>{t.preventDefault(),s(e),u(!0)},handleAddUserOk=()=>{u(!1)},handleAddUserCancel=e=>{e.current?.resetFields(),u(!1)},handleStateOk=()=>{d(!1)},handleStateCancel=()=>{d(!1)},confirm=e=>o=>{o.preventDefault(),t(e)};return r.jsx("div",{className:"flex flex-row gap-8",children:e.map(e=>(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center gap-2 mt-3",children:[r.jsx("span",{className:"text-white text-sm font-bold phone:text-xs",children:e.name}),(0,r.jsxs)("span",{className:"text-white text-sm phone:text-xs",children:[r.jsx("span",{className:"text-white opacity-60",children:"Codigo: "}),e.code]}),(0,r.jsxs)("span",{className:"text-white text-sm phone:text-xs",children:[r.jsx("span",{className:"text-white opacity-60",children:"Expira: "}),formatDateAndTime(e.expirationDate)]}),(0,r.jsxs)("span",{className:"text-white text-sm phone:text-xs",children:[r.jsx("span",{className:"text-white opacity-60",children:"Estado: "}),e.isPublic?"Publica":"Privada"]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[r.jsx(w.Z,{title:"Eliminar sala",description:"\xbfEstas seguro que deseas eliminar esta sala?",okType:"danger",okText:"Si",cancelText:"No",onConfirm:confirm(e.code),cancelButtonProps:{type:"text"},icon:r.jsx(C.default,{style:{color:"red"}}),children:r.jsx(j.Z,{})}),r.jsx(y.Z,{onClick:showFormState(e.code,e.isPublic)}),(0,r.jsxs)(f.default,{theme:{components:{Button:{colorBgTextHover:"#fff",colorPrimaryHover:"#fff",colorTextDisabled:"rgba(255, 255, 255, 0.5)",colorBgContainerDisabled:"rgba(127, 25, 180, 0.5))",colorPrimaryActive:"#fff"},Modal:{contentBg:"#121212",headerBg:"#121212",titleColor:"#fff"}}},children:[r.jsx(m.Z,{title:"Cambiar el estado",open:i,footer:null,closeIcon:!1,children:r.jsx(components_ChangeState,{handleStateOk:handleStateOk,handleStateCancel:handleStateCancel,code:l,state:n,getRooms:o})}),!1===e.isPublic?r.jsx(v.Z,{onClick:showAddUser(e.code)}):null,r.jsx(m.Z,{title:"Agregar usuarios",open:h,footer:null,closeIcon:!1,children:r.jsx(components_AddUsers,{handleAddUserOk:handleAddUserOk,handleAddUserCancel:handleAddUserCancel,code:l,getRooms:o})})]})]}),r.jsx(P(),{href:`${e.code}`,children:r.jsx("button",{className:"bg-purple hover:bg-violet-900 text-white text-sm font-bold py-1 px-2 rounded phone:px-1 phone:text-xs",children:"Ingresar"})})]},e.code))})},components_RoomsList=({rooms:e,deleteRoom:t,getRooms:o})=>(0,r.jsxs)("div",{className:"flex flex-col mt-3 tablet:items-center tablet:justify-center",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[r.jsx("h1",{className:"text-base font-bold text-white phone:text-sm",children:"Tus salas"}),r.jsx(h.default,{placement:"top",title:"Solo puedes tener 3 salas",children:r.jsx(C.default,{})})]}),r.jsx(RoomsTable,{rooms:e,deleteRoom:t,getRooms:o})]}),Header=()=>(0,r.jsxs)("div",{className:"flex flex-col gap-2 tablet:items-center tablet:justify-center",children:[(0,r.jsxs)("div",{className:"text-white phone:text-start",children:[r.jsx("span",{className:"text-purple text-4xl font-bold tablet:text-3xl",children:"Shared"}),r.jsx("span",{className:"text-4xl font-bold tablet:text-3xl",children:"View"})]}),r.jsx("p",{className:"text-base text-gray-400 tablet:text-sm phone:text-center",children:"Crea una sala y comparte el codigo con tus amigos"})]}),Controls=({isModalOpen:e,setIsModalOpen:t,stateButton:o,createRooms:l})=>{let[c,u]=(0,a.useState)(!1),x=(0,a.useRef)();return(0,r.jsxs)("div",{className:"flex flex-wrap-reverse gap-4 tablet:flex-row tablet:items-center tablet:justify-center",children:[(0,r.jsxs)(f.default,{theme:{components:{Button:{colorBgTextHover:"#fff",colorPrimaryHover:"#fff",colorTextDisabled:"rgba(255, 255, 255, 0.5)",colorBgContainerDisabled:"rgba(127, 25, 180, 0.5))",colorPrimaryActive:"#fff"},Modal:{contentBg:"#121212",headerBg:"#121212",titleColor:"#fff"}}},children:[r.jsx(i(),{size:"large",disabled:o,className:"bg-purple hover:bg-violet-900 text-white border-none phone:w-full",icon:r.jsx(s.Z,{}),onClick:()=>{t(!0)},children:"Crear sala"}),r.jsx(m.Z,{title:"Crear una sala",open:e,footer:null,closeIcon:!1,children:r.jsx(components_CreateRoomForm,{handleOk:()=>{t(!1)},handleCancel:e=>{e.current?.resetFields(),t(!1)},createRooms:l})})]}),r.jsx("div",{className:"flex flex-row items-center gap-4 tablet:gap-2 phone:w-full",children:(0,r.jsxs)(f.default,{theme:{components:{Button:{colorText:"#fff",colorTextDisabled:"rgba(255, 255, 255, 0.5)"},Input:{activeBorderColor:"#1e1e1e",hoverBorderColor:"#1e1e1e"}}},children:[r.jsx(d.Z,{name:"code",size:"large",placeholder:"Ingresa el codigo de la reunion",onChange:e=>{""===e.target.value?u(!1):u(!0)},ref:x,allowClear:!0,suffix:r.jsx(h.default,{title:"Example: xac-1a3-vds",children:r.jsx(n.Z,{style:{color:"rgba(0,0,0,.45)"}})})}),r.jsx(P(),{href:"/[code]",as:`/${x.current?.input.value}`,children:r.jsx(i(),{type:"text",size:"large",disabled:!c,children:"Unirse"})})]})})]})},ImageHome=()=>r.jsx(g(),{src:b,width:500,height:500,alt:"img",className:"phone:h-60 phone:w-60 tablet:h-96 tablet:w-96"}),Rooms=()=>{let[e,t]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[s,n]=(0,a.useState)([]),createRooms=async(e,t,o)=>{await useFetchCreateRoom(e,t,o),getRooms()},getRooms=async()=>{let e=await useFetchRooms();n(e)},deleteRoom=async e=>{await useFetchDeleteRoom(e),getRooms()};return(0,a.useEffect)(()=>{getRooms()},[]),(0,a.useEffect)(()=>{s.length>=3?l(!0):l(!1)},[s]),(0,r.jsxs)(r.Fragment,{children:[r.jsx(Controls,{isModalOpen:e,setIsModalOpen:t,stateButton:o,createRooms:createRooms}),r.jsx(components_RoomsList,{rooms:s,deleteRoom:deleteRoom,getRooms:getRooms})]})},components_HomeView=()=>(0,r.jsxs)("div",{className:"flex flex-row items-center justify-evenly px-8 w-full tablet:flex-col-reverse tablet:justify-center",children:[(0,r.jsxs)("div",{className:"w-1/2 flex flex-col gap-8 tablet:w-full tablet:mb-8",children:[r.jsx(Header,{}),r.jsx(Rooms,{})]}),r.jsx("div",{className:"flex flex-col",children:r.jsx(ImageHome,{})})]});var S=o(18045);let page=()=>{let[e,t]=l().useState(null);return l().useEffect(()=>{t(localStorage.getItem("username"))},[]),(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[r.jsx(S.default,{username:e}),r.jsx("div",{className:"flex flex-1 justify-between ",children:r.jsx(components_HomeView,{})})]})}},37154:(e,t,o)=>{"use strict";o.r(t),o.d(t,{$$typeof:()=>s,__esModule:()=>l,default:()=>c});var r=o(17536);let a=(0,r.createProxy)(String.raw`D:\Nueva carpeta\sharedview_nextjs\NextJS Proyect\src\app\home\page.js`),{__esModule:l,$$typeof:s}=a,n=a.default,c=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),o=t.X(0,[659,636,975,345,412,358,265],()=>__webpack_exec__(30319));module.exports=o})();